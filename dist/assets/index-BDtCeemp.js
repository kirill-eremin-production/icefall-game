(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();const Nn=!1;var mt=Array.isArray,Pr=Array.prototype.indexOf,Bt=Array.from,ut=Object.defineProperty,ze=Object.getOwnPropertyDescriptor,On=Object.getOwnPropertyDescriptors,qr=Object.prototype,jr=Array.prototype,Ut=Object.getPrototypeOf,cn=Object.isExtensible;const qe=()=>{};function Ir(e){return e()}function Lt(e){for(var t=0;t<e.length;t++)e[t]()}function Rr(){var e,t,n=new Promise((s,r)=>{e=s,t=r});return{promise:n,resolve:e,reject:t}}const z=2,Ln=4,ht=8,He=16,pe=32,Ne=64,Pn=128,te=256,ft=512,F=1024,ne=2048,_e=4096,ie=8192,Be=16384,Gt=32768,Vt=65536,vn=1<<17,Dr=1<<18,rt=1<<19,qn=1<<20,Pt=1<<21,Kt=1<<22,Me=1<<23,ke=Symbol("$state"),Fr=Symbol(""),Wt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Hr(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function Br(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ur(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Gr(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Vr(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Kr(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Wr(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Yr(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function zr(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Xr(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const gt=1,bt=2,jn=4,Zr=8,Jr=16,Qr=1,es=2,D=Symbol(),ts="http://www.w3.org/1999/xhtml";function ns(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}let rs=!1;function In(e){return e===this.v}function Rn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Dn(e){return!Rn(e,this.v)}let st=!1,ss=!1;function ls(){st=!0}let R=null;function ct(e){R=e}function me(e,t=!1,n){R={p:R,c:null,e:null,s:e,x:null,l:st&&!t?{s:null,u:null,$:[]}:null}}function he(e){var t=R,n=t.e;if(n!==null){t.e=null;for(var s of n)er(s)}return R=t.p,{}}function lt(){return!st||R!==null&&R.l===null}const is=new WeakMap;function as(e){var t=A;if(t===null)return C.f|=Me,e;if((t.f&Gt)===0){if((t.f&Pn)===0)throw!t.parent&&e instanceof Error&&Fn(e),e;t.b.error(e)}else Yt(e,t)}function Yt(e,t){for(;t!==null;){if((t.f&Pn)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e instanceof Error&&Fn(e),e}function Fn(e){const t=is.get(e);t&&(ut(e,"message",{value:t.message}),ut(e,"stack",{value:t.stack}))}let vt=[];function os(){var e=vt;vt=[],Lt(e)}function Hn(e){vt.length===0&&queueMicrotask(os),vt.push(e)}function us(){for(var e=A.b;e!==null&&!e.has_pending_snippet();)e=e.parent;return e===null&&Hr(),e}function zt(e){var t=z|ne,n=C!==null&&(C.f&z)!==0?C:null;return A===null||n!==null&&(n.f&te)!==0?t|=te:A.f|=rt,{ctx:R,deps:null,effects:null,equals:In,f:t,fn:e,reactions:null,rv:0,v:D,wv:0,parent:n??A,ac:null}}function fs(e,t){let n=A;n===null&&Ur();var s=n.b,r=void 0,l=Je(D),i=null,u=!C;return xs(()=>{try{var a=e()}catch(f){a=Promise.reject(f)}var o=()=>a;r=i?.then(o,o)??Promise.resolve(a),i=r;var p=B,_=s.pending;u&&(s.update_pending_count(1),_||p.increment());const v=(f,d=void 0)=>{i=null,_||p.activate(),d?d!==Wt&&(l.f|=Me,et(l,d)):((l.f&Me)!==0&&(l.f^=Me),et(l,f)),u&&(s.update_pending_count(-1),_||p.decrement()),Vn()};if(r.then(v,f=>v(null,f||"unknown")),p)return()=>{queueMicrotask(()=>p.neuter())}}),new Promise(a=>{function o(p){function _(){p===r?a(l):o(r)}p.then(_,_)}o(r)})}function Bn(e){const t=zt(e);return t.equals=Dn,t}function Un(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)de(t[n])}}function cs(e){for(var t=e.parent;t!==null;){if((t.f&z)===0)return t;t=t.parent}return null}function Xt(e){var t,n=A;Ee(cs(e));try{Un(e),t=vr(e)}finally{Ee(n)}return t}function Gn(e){var t=Xt(e);if(e.equals(t)||(e.v=t,e.wv=fr()),!Ue)if(Re!==null)Re.set(e,e.v);else{var n=(we||(e.f&te)!==0)&&e.deps!==null?_e:F;V(e,n)}}function vs(e,t,n){const s=lt()?zt:Bn;if(t.length===0){n(e.map(s));return}var r=B,l=A,i=ds(),u=us();Promise.all(t.map(a=>fs(a))).then(a=>{r?.activate(),i();try{n([...e.map(s),...a])}catch(o){(l.f&Be)===0&&Yt(o,l)}r?.deactivate(),Vn()}).catch(a=>{u.error(a)})}function ds(){var e=A,t=C,n=R;return function(){Ee(e),fe(t),ct(n)}}function Vn(){Ee(null),fe(null),ct(null)}const Ke=new Set;let B=null,Re=null,dn=new Set,dt=[];function Kn(){const e=dt.shift();dt.length>0&&queueMicrotask(Kn),e()}let Ze=[],Zt=null,qt=!1;class De{current=new Map;#s=new Map;#l=new Set;#e=0;#u=null;#f=!1;#n=[];#i=[];#r=[];#t=[];#a=[];#c=[];#v=[];skipped_effects=new Set;process(t){Ze=[];var n=null;if(Ke.size>1){n=new Map,Re=new Map;for(const[l,i]of this.current)n.set(l,{v:l.v,wv:l.wv}),l.v=i;for(const l of Ke)if(l!==this)for(const[i,u]of l.#s)n.has(i)||(n.set(i,{v:i.v,wv:i.wv}),i.v=u)}for(const l of t)this.#p(l);if(this.#n.length===0&&this.#e===0){this.#d();var s=this.#r,r=this.#t;this.#r=[],this.#t=[],this.#a=[],B=null,pn(s),pn(r),B===null?B=this:Ke.delete(this),this.#u?.resolve()}else this.#o(this.#r),this.#o(this.#t),this.#o(this.#a);if(n){for(const[l,{v:i,wv:u}]of n)l.wv<=u&&(l.v=i);Re=null}for(const l of this.#n)Ce(l);for(const l of this.#i)Ce(l);this.#n=[],this.#i=[]}#p(t){t.f^=F;for(var n=t.first;n!==null;){var s=n.f,r=(s&(pe|Ne))!==0,l=r&&(s&F)!==0,i=l||(s&ie)!==0||this.skipped_effects.has(n);if(!i&&n.fn!==null){if(r)n.f^=F;else if((s&Ln)!==0)this.#t.push(n);else if((s&F)===0)if((s&Kt)!==0){var u=n.b?.pending?this.#i:this.#n;u.push(n)}else at(n)&&((n.f&He)!==0&&this.#a.push(n),Ce(n));var a=n.first;if(a!==null){n=a;continue}}var o=n.parent;for(n=n.next;n===null&&o!==null;)n=o.next,o=o.parent}}#o(t){for(const n of t)((n.f&ne)!==0?this.#c:this.#v).push(n),V(n,F);t.length=0}capture(t,n){this.#s.has(t)||this.#s.set(t,n),this.current.set(t,t.v)}activate(){B=this}deactivate(){B=null;for(const t of dn)if(dn.delete(t),t(),B!==null)break}neuter(){this.#f=!0}flush(){Ze.length>0?ps():this.#d(),B===this&&(this.#e===0&&Ke.delete(this),this.deactivate())}#d(){if(!this.#f)for(const t of this.#l)t();this.#l.clear()}increment(){this.#e+=1}decrement(){if(this.#e-=1,this.#e===0){for(const t of this.#c)V(t,ne),Fe(t);for(const t of this.#v)V(t,_e),Fe(t);this.#r=[],this.#t=[],this.flush()}else this.deactivate()}add_callback(t){this.#l.add(t)}settled(){return(this.#u??=Rr()).promise}static ensure(){if(B===null){const t=B=new De;Ke.add(B),De.enqueue(()=>{B===t&&t.flush()})}return B}static enqueue(t){dt.length===0&&queueMicrotask(Kn),dt.unshift(t)}}function ps(){var e=je;qt=!0;try{var t=0;for(hn(!0);Ze.length>0;){var n=De.ensure();if(t++>1e3){var s,r;_s()}n.process(Ze),ye.clear()}}finally{qt=!1,hn(e),Zt=null}}function _s(){try{Wr()}catch(e){Yt(e,Zt)}}let Te=null;function pn(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var s=e[n++];if((s.f&(Be|ie))===0&&at(s)&&(Te=[],Ce(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null&&s.ac===null?ir(s):s.fn=null),Te.length>0)){ye.clear();for(const r of Te)Ce(r);Te=[]}}Te=null}}function Fe(e){for(var t=Zt=e;t.parent!==null;){t=t.parent;var n=t.f;if(qt&&t===A&&(n&He)!==0)return;if((n&(Ne|pe))!==0){if((n&F)===0)return;t.f^=F}}Ze.push(t)}const ye=new Map;function Je(e,t){var n={f:0,v:e,reactions:null,equals:In,rv:0,wv:0};return n}function be(e,t){const n=Je(e);return Ts(n),n}function Qe(e,t=!1,n=!0){const s=Je(e);return t||(s.equals=Dn),st&&n&&R!==null&&R.l!==null&&(R.l.s??=[]).push(s),s}function se(e,t,n=!1){C!==null&&(!ue||(C.f&vn)!==0)&&lt()&&(C.f&(z|He|Kt|vn))!==0&&!ce?.includes(e)&&Xr();let s=n?We(t):t;return et(e,s)}function et(e,t){if(!e.equals(t)){var n=e.v;Ue?ye.set(e,t):ye.set(e,n),e.v=t;var s=De.ensure();s.capture(e,n),(e.f&z)!==0&&((e.f&ne)!==0&&Xt(e),V(e,(e.f&te)===0?F:_e)),e.wv=fr(),Wn(e,ne),lt()&&A!==null&&(A.f&F)!==0&&(A.f&(pe|Ne))===0&&(Q===null?Ms([e]):Q.push(e))}return t}function Tt(e){se(e,e.v+1)}function Wn(e,t){var n=e.reactions;if(n!==null)for(var s=lt(),r=n.length,l=0;l<r;l++){var i=n[l],u=i.f;if(!(!s&&i===A)){var a=(u&ne)===0;a&&V(i,t),(u&z)!==0?Wn(i,_e):a&&((u&He)!==0&&Te!==null&&Te.push(i),Fe(i))}}}function We(e){if(typeof e!="object"||e===null||ke in e)return e;const t=Ut(e);if(t!==qr&&t!==jr)return e;var n=new Map,s=mt(e),r=be(0),l=$e,i=u=>{if($e===l)return u();var a=C,o=$e;fe(null),bn(l);var p=u();return fe(a),bn(o),p};return s&&n.set("length",be(e.length)),new Proxy(e,{defineProperty(u,a,o){(!("value"in o)||o.configurable===!1||o.enumerable===!1||o.writable===!1)&&Yr();var p=n.get(a);return p===void 0?p=i(()=>{var _=be(o.value);return n.set(a,_),_}):se(p,o.value,!0),!0},deleteProperty(u,a){var o=n.get(a);if(o===void 0){if(a in u){const p=i(()=>be(D));n.set(a,p),Tt(r)}}else se(o,D),Tt(r);return!0},get(u,a,o){if(a===ke)return e;var p=n.get(a),_=a in u;if(p===void 0&&(!_||ze(u,a)?.writable)&&(p=i(()=>{var f=We(_?u[a]:D),d=be(f);return d}),n.set(a,p)),p!==void 0){var v=b(p);return v===D?void 0:v}return Reflect.get(u,a,o)},getOwnPropertyDescriptor(u,a){var o=Reflect.getOwnPropertyDescriptor(u,a);if(o&&"value"in o){var p=n.get(a);p&&(o.value=b(p))}else if(o===void 0){var _=n.get(a),v=_?.v;if(_!==void 0&&v!==D)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return o},has(u,a){if(a===ke)return!0;var o=n.get(a),p=o!==void 0&&o.v!==D||Reflect.has(u,a);if(o!==void 0||A!==null&&(!p||ze(u,a)?.writable)){o===void 0&&(o=i(()=>{var v=p?We(u[a]):D,f=be(v);return f}),n.set(a,o));var _=b(o);if(_===D)return!1}return p},set(u,a,o,p){var _=n.get(a),v=a in u;if(s&&a==="length")for(var f=o;f<_.v;f+=1){var d=n.get(f+"");d!==void 0?se(d,D):f in u&&(d=i(()=>be(D)),n.set(f+"",d))}if(_===void 0)(!v||ze(u,a)?.writable)&&(_=i(()=>be(void 0)),se(_,We(o)),n.set(a,_));else{v=_.v!==D;var y=i(()=>We(o));se(_,y)}var w=Reflect.getOwnPropertyDescriptor(u,a);if(w?.set&&w.set.call(p,o),!v){if(s&&typeof a=="string"){var M=n.get("length"),E=Number(a);Number.isInteger(E)&&E>=M.v&&se(M,E+1)}Tt(r)}return!0},ownKeys(u){b(r);var a=Reflect.ownKeys(u).filter(_=>{var v=n.get(_);return v===void 0||v.v!==D});for(var[o,p]of n)p.v!==D&&!(o in u)&&a.push(o);return a},setPrototypeOf(){zr()}})}function _n(e){try{if(e!==null&&typeof e=="object"&&ke in e)return e[ke]}catch{}return e}function ms(e,t){return Object.is(_n(e),_n(t))}var mn,Yn,zn,Xn;function hs(){if(mn===void 0){mn=window,Yn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;zn=ze(t,"firstChild").get,Xn=ze(t,"nextSibling").get,cn(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),cn(n)&&(n.__t=void 0)}}function it(e=""){return document.createTextNode(e)}function pt(e){return zn.call(e)}function wt(e){return Xn.call(e)}function g(e,t){return pt(e)}function Zn(e,t){{var n=pt(e);return n instanceof Comment&&n.data===""?wt(n):n}}function x(e,t=1,n=!1){let s=e;for(;t--;)s=wt(s);return s}function gs(e){e.textContent=""}function Jn(){return!1}function Jt(e){var t=C,n=A;fe(null),Ee(null);try{return e()}finally{fe(t),Ee(n)}}function Qn(e){A===null&&C===null&&Kr(),C!==null&&(C.f&te)!==0&&A===null&&Vr(),Ue&&Gr()}function bs(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function ge(e,t,n,s=!0){var r=A;r!==null&&(r.f&ie)!==0&&(e|=ie);var l={ctx:R,deps:null,nodes_start:null,nodes_end:null,f:e|ne,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Ce(l),l.f|=Gt}catch(a){throw de(l),a}else t!==null&&Fe(l);if(s){var i=l;if(n&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&rt)===0&&(i=i.first),i!==null&&(i.parent=r,r!==null&&bs(i,r),C!==null&&(C.f&z)!==0&&(e&Ne)===0)){var u=C;(u.effects??=[]).push(i)}}return l}function Qt(e){const t=ge(ht,null,!1);return V(t,F),t.teardown=e,t}function jt(e){Qn();var t=A.f,n=!C&&(t&pe)!==0&&(t&Gt)===0;if(n){var s=R;(s.e??=[]).push(e)}else return er(e)}function er(e){return ge(Ln|qn,e,!1)}function ws(e){return Qn(),ge(ht|qn,e,!0)}function ys(e){De.ensure();const t=ge(Ne|rt,e,!0);return(n={})=>new Promise(s=>{n.outro?en(t,()=>{de(t),s(void 0)}):(de(t),s(void 0))})}function It(e,t){var n=R,s={effect:null,ran:!1,deps:e};n.l.$.push(s),s.effect=nr(()=>{e(),!s.ran&&(s.ran=!0,ee(t))})}function tr(){var e=R;nr(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&F)!==0&&V(n,_e),at(n)&&Ce(n),t.ran=!1}})}function xs(e){return ge(Kt|rt,e,!0)}function nr(e,t=0){return ge(ht|t,e,!0)}function le(e,t=[],n=[]){vs(t,n,s=>{ge(ht,()=>e(...s.map(b)),!0)})}function rr(e,t=0){var n=ge(He|t,e,!0);return n}function tt(e,t=!0){return ge(pe|rt,e,!0,t)}function sr(e){var t=e.teardown;if(t!==null){const n=Ue,s=C;gn(!0),fe(null);try{t.call(null)}finally{gn(n),fe(s)}}}function lr(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const r=n.ac;r!==null&&Jt(()=>{r.abort(Wt)});var s=n.next;(n.f&Ne)!==0?n.parent=null:de(n,t),n=s}}function Es(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&pe)===0&&de(t),t=n}}function de(e,t=!0){var n=!1;(t||(e.f&Dr)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Ss(e.nodes_start,e.nodes_end),n=!0),lr(e,t&&!n),_t(e,0),V(e,Be);var s=e.transitions;if(s!==null)for(const l of s)l.stop();sr(e);var r=e.parent;r!==null&&r.first!==null&&ir(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Ss(e,t){for(;e!==null;){var n=e===t?null:wt(e);e.remove(),e=n}}function ir(e){var t=e.parent,n=e.prev,s=e.next;n!==null&&(n.next=s),s!==null&&(s.prev=n),t!==null&&(t.first===e&&(t.first=s),t.last===e&&(t.last=n))}function en(e,t){var n=[];tn(e,n,!0),ar(n,()=>{de(e),t&&t()})}function ar(e,t){var n=e.length;if(n>0){var s=()=>--n||t();for(var r of e)r.out(s)}else t()}function tn(e,t,n){if((e.f&ie)===0){if(e.f^=ie,e.transitions!==null)for(const i of e.transitions)(i.is_global||n)&&t.push(i);for(var s=e.first;s!==null;){var r=s.next,l=(s.f&Vt)!==0||(s.f&pe)!==0;tn(s,t,l?n:!1),s=r}}}function nn(e){or(e,!0)}function or(e,t){if((e.f&ie)!==0){e.f^=ie,(e.f&F)===0&&(V(e,ne),Fe(e));for(var n=e.first;n!==null;){var s=n.next,r=(n.f&Vt)!==0||(n.f&pe)!==0;or(n,r?t:!1),n=s}if(e.transitions!==null)for(const l of e.transitions)(l.is_global||t)&&l.in()}}let je=!1;function hn(e){je=e}let Ue=!1;function gn(e){Ue=e}let C=null,ue=!1;function fe(e){C=e}let A=null;function Ee(e){A=e}let ce=null;function Ts(e){C!==null&&(ce===null?ce=[e]:ce.push(e))}let G=null,W=0,Q=null;function Ms(e){Q=e}let ur=1,nt=0,$e=nt;function bn(e){$e=e}let we=!1;function fr(){return++ur}function at(e){var t=e.f;if((t&ne)!==0)return!0;if((t&_e)!==0){var n=e.deps,s=(t&te)!==0;if(n!==null){var r,l,i=(t&ft)!==0,u=s&&A!==null&&!we,a=n.length;if((i||u)&&(A===null||(A.f&Be)===0)){var o=e,p=o.parent;for(r=0;r<a;r++)l=n[r],(i||!l?.reactions?.includes(o))&&(l.reactions??=[]).push(o);i&&(o.f^=ft),u&&p!==null&&(p.f&te)===0&&(o.f^=te)}for(r=0;r<a;r++)if(l=n[r],at(l)&&Gn(l),l.wv>e.wv)return!0}(!s||A!==null&&!we)&&V(e,F)}return!1}function cr(e,t,n=!0){var s=e.reactions;if(s!==null&&!ce?.includes(e))for(var r=0;r<s.length;r++){var l=s[r];(l.f&z)!==0?cr(l,t,!1):t===l&&(n?V(l,ne):(l.f&F)!==0&&V(l,_e),Fe(l))}}function vr(e){var t=G,n=W,s=Q,r=C,l=we,i=ce,u=R,a=ue,o=$e,p=e.f;G=null,W=0,Q=null,we=(p&te)!==0&&(ue||!je||C===null),C=(p&(pe|Ne))===0?e:null,ce=null,ct(e.ctx),ue=!1,$e=++nt,e.ac!==null&&(Jt(()=>{e.ac.abort(Wt)}),e.ac=null);try{e.f|=Pt;var _=e.fn,v=_(),f=e.deps;if(G!==null){var d;if(_t(e,W),f!==null&&W>0)for(f.length=W+G.length,d=0;d<G.length;d++)f[W+d]=G[d];else e.deps=f=G;if(!we||(p&z)!==0&&e.reactions!==null)for(d=W;d<f.length;d++)(f[d].reactions??=[]).push(e)}else f!==null&&W<f.length&&(_t(e,W),f.length=W);if(lt()&&Q!==null&&!ue&&f!==null&&(e.f&(z|_e|ne))===0)for(d=0;d<Q.length;d++)cr(Q[d],e);return r!==null&&r!==e&&(nt++,Q!==null&&(s===null?s=Q:s.push(...Q))),(e.f&Me)!==0&&(e.f^=Me),v}catch(y){return as(y)}finally{e.f^=Pt,G=t,W=n,Q=s,C=r,we=l,ce=i,ct(u),ue=a,$e=o}}function ks(e,t){let n=t.reactions;if(n!==null){var s=Pr.call(n,e);if(s!==-1){var r=n.length-1;r===0?n=t.reactions=null:(n[s]=n[r],n.pop())}}n===null&&(t.f&z)!==0&&(G===null||!G.includes(t))&&(V(t,_e),(t.f&(te|ft))===0&&(t.f^=ft),Un(t),_t(t,0))}function _t(e,t){var n=e.deps;if(n!==null)for(var s=t;s<n.length;s++)ks(e,n[s])}function Ce(e){var t=e.f;if((t&Be)===0){V(e,F);var n=A,s=je;A=e,je=!0;try{(t&He)!==0?Es(e):lr(e),sr(e);var r=vr(e);e.teardown=typeof r=="function"?r:null,e.wv=ur;var l;Nn&&ss&&(e.f&ne)!==0&&e.deps}finally{je=s,A=n}}}function b(e){var t=e.f,n=(t&z)!==0;if(C!==null&&!ue){var s=A!==null&&(A.f&Be)!==0;if(!s&&!ce?.includes(e)){var r=C.deps;if((C.f&Pt)!==0)e.rv<nt&&(e.rv=nt,G===null&&r!==null&&r[W]===e?W++:G===null?G=[e]:(!we||!G.includes(e))&&G.push(e));else{(C.deps??=[]).push(e);var l=e.reactions;l===null?e.reactions=[C]:l.includes(C)||l.push(C)}}}else if(n&&e.deps===null&&e.effects===null){var i=e,u=i.parent;u!==null&&(u.f&te)===0&&(i.f^=te)}if(Ue){if(ye.has(e))return ye.get(e);if(n){i=e;var a=i.v;return((i.f&F)===0&&i.reactions!==null||dr(i))&&(a=Xt(i)),ye.set(i,a),a}}else if(n){if(i=e,Re?.has(i))return Re.get(i);at(i)&&Gn(i)}if((e.f&Me)!==0)throw e.v;return e.v}function dr(e){if(e.v===D)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(ye.has(t)||(t.f&z)!==0&&dr(t))return!0;return!1}function ee(e){var t=ue;try{return ue=!0,e()}finally{ue=t}}const $s=-7169;function V(e,t){e.f=e.f&$s|t}function pr(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(ke in e)Rt(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&ke in n&&Rt(n)}}}function Rt(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let s in e)try{Rt(e[s],t)}catch{}const n=Ut(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const s=On(n);for(let r in s){const l=s[r].get;if(l)try{l.call(e)}catch{}}}}}const Cs=["touchstart","touchmove"];function As(e){return Cs.includes(e)}const Ns=new Set,wn=new Set;function Os(e,t,n,s={}){function r(l){if(s.capture||Ye.call(t,l),!l.cancelBubble)return Jt(()=>n?.call(this,l))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Hn(()=>{t.addEventListener(e,r,s)}):t.addEventListener(e,r,s),r}function Y(e,t,n,s,r){var l={capture:s,passive:r},i=Os(e,t,n,l);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Qt(()=>{t.removeEventListener(e,i,l)})}let yn=null;function Ye(e){var t=this,n=t.ownerDocument,s=e.type,r=e.composedPath?.()||[],l=r[0]||e.target;yn=e;var i=0,u=yn===e&&e.__root;if(u){var a=r.indexOf(u);if(a!==-1&&(t===document||t===window)){e.__root=t;return}var o=r.indexOf(t);if(o===-1)return;a<=o&&(i=a)}if(l=r[i]||e.target,l!==t){ut(e,"currentTarget",{configurable:!0,get(){return l||n}});var p=C,_=A;fe(null),Ee(null);try{for(var v,f=[];l!==null;){var d=l.assignedSlot||l.parentNode||l.host||null;try{var y=l["__"+s];if(y!=null&&(!l.disabled||e.target===l))if(mt(y)){var[w,...M]=y;w.apply(l,[e,...M])}else y.call(l,e)}catch(E){v?f.push(E):v=E}if(e.cancelBubble||d===t||d===null)break;l=d}if(v){for(let E of f)queueMicrotask(()=>{throw E});throw v}}finally{e.__root=t,delete e.currentTarget,fe(p),Ee(_)}}}function Ls(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Dt(e,t){var n=A;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function U(e,t){var n=(t&Qr)!==0,s=(t&es)!==0,r,l=!e.startsWith("<!>");return()=>{r===void 0&&(r=Ls(l?e:"<!>"+e),n||(r=pt(r)));var i=s||Yn?document.importNode(r,!0):r.cloneNode(!0);if(n){var u=pt(i),a=i.lastChild;Dt(u,a)}else Dt(i,i);return i}}function Ps(){var e=document.createDocumentFragment(),t=document.createComment(""),n=it();return e.append(t,n),Dt(t,n),e}function H(e,t){e!==null&&e.before(t)}function I(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function qs(e,t){return js(e,t)}const Le=new Map;function js(e,{target:t,anchor:n,props:s={},events:r,context:l,intro:i=!0}){hs();var u=new Set,a=_=>{for(var v=0;v<_.length;v++){var f=_[v];if(!u.has(f)){u.add(f);var d=As(f);t.addEventListener(f,Ye,{passive:d});var y=Le.get(f);y===void 0?(document.addEventListener(f,Ye,{passive:d}),Le.set(f,1)):Le.set(f,y+1)}}};a(Bt(Ns)),wn.add(a);var o=void 0,p=ys(()=>{var _=n??t.appendChild(it());return tt(()=>{if(l){me({});var v=R;v.c=l}r&&(s.$$events=r),o=e(_,s)||{},l&&he()}),()=>{for(var v of u){t.removeEventListener(v,Ye);var f=Le.get(v);--f===0?(document.removeEventListener(v,Ye),Le.delete(v)):Le.set(v,f)}wn.delete(a),_!==n&&_.parentNode?.removeChild(_)}});return Is.set(o,p),o}let Is=new WeakMap;function Mt(e,t,n=!1){var s=e,r=null,l=null,i=D,u=n?Vt:0,a=!1;const o=(f,d=!0)=>{a=!0,v(d,f)};var p=null;function _(){p!==null&&(p.lastChild.remove(),s.before(p),p=null);var f=i?r:l,d=i?l:r;f&&nn(f),d&&en(d,()=>{i?l=null:r=null})}const v=(f,d)=>{if(i!==(i=f)){var y=Jn(),w=s;if(y&&(p=document.createDocumentFragment(),p.append(w=it())),i?r??=d&&tt(()=>d(w)):l??=d&&tt(()=>d(w)),y){var M=B,E=i?r:l,k=i?l:r;E&&M.skipped_effects.delete(E),k&&M.skipped_effects.add(k),M.add_callback(_)}else _()}};rr(()=>{a=!1,t(o),a||v(null,null)},u)}function Ae(e,t){return t}function Rs(e,t,n){for(var s=e.items,r=[],l=t.length,i=0;i<l;i++)tn(t[i].e,r,!0);var u=l>0&&r.length===0&&n!==null;if(u){var a=n.parentNode;gs(a),a.append(n),s.clear(),oe(e,t[0].prev,t[l-1].next)}ar(r,()=>{for(var o=0;o<l;o++){var p=t[o];u||(s.delete(p.k),oe(e,p.prev,p.next)),de(p.e,!u)}})}function ve(e,t,n,s,r,l=null){var i=e,u={flags:t,items:new Map,first:null},a=(t&jn)!==0;if(a){var o=e;i=o.appendChild(it())}var p=null,_=!1,v=new Map,f=Bn(()=>{var M=n();return mt(M)?M:M==null?[]:Bt(M)}),d,y;function w(){Ds(y,d,u,v,i,r,t,s,n),l!==null&&(d.length===0?p?nn(p):p=tt(()=>l(i)):p!==null&&en(p,()=>{p=null}))}rr(()=>{y??=A,d=b(f);var M=d.length;if(!(_&&M===0)){_=M===0;var E,k,q,L;if(Jn()){var S=new Set,$=B;for(k=0;k<M;k+=1){q=d[k],L=s(q,k);var N=u.items.get(L)??v.get(L);N?(t&(gt|bt))!==0&&_r(N,q,k,t):(E=mr(null,u,null,null,q,L,k,r,t,n,!0),v.set(L,E)),S.add(L)}for(const[X,Z]of u.items)S.has(X)||$.skipped_effects.add(Z.e);$.add_callback(w)}else w();b(f)}})}function Ds(e,t,n,s,r,l,i,u,a){var o=(i&Zr)!==0,p=(i&(gt|bt))!==0,_=t.length,v=n.items,f=n.first,d=f,y,w=null,M,E=[],k=[],q,L,S,$;if(o)for($=0;$<_;$+=1)q=t[$],L=u(q,$),S=v.get(L),S!==void 0&&(S.a?.measure(),(M??=new Set).add(S));for($=0;$<_;$+=1){if(q=t[$],L=u(q,$),S=v.get(L),S===void 0){var N=s.get(L);if(N!==void 0){s.delete(L),v.set(L,N);var X=w?w.next:d;oe(n,w,N),oe(n,N,X),kt(N,X,r),w=N}else{var Z=d?d.e.nodes_start:r;w=mr(Z,n,w,w===null?n.first:w.next,q,L,$,l,i,a)}v.set(L,w),E=[],k=[],d=w.next;continue}if(p&&_r(S,q,$,i),(S.e.f&ie)!==0&&(nn(S.e),o&&(S.a?.unfix(),(M??=new Set).delete(S))),S!==d){if(y!==void 0&&y.has(S)){if(E.length<k.length){var c=k[0],m;w=c.prev;var h=E[0],T=E[E.length-1];for(m=0;m<E.length;m+=1)kt(E[m],c,r);for(m=0;m<k.length;m+=1)y.delete(k[m]);oe(n,h.prev,T.next),oe(n,w,h),oe(n,T,c),d=c,w=T,$-=1,E=[],k=[]}else y.delete(S),kt(S,d,r),oe(n,S.prev,S.next),oe(n,S,w===null?n.first:w.next),oe(n,w,S),w=S;continue}for(E=[],k=[];d!==null&&d.k!==L;)(d.e.f&ie)===0&&(y??=new Set).add(d),k.push(d),d=d.next;if(d===null)continue;S=d}E.push(S),w=S,d=S.next}if(d!==null||y!==void 0){for(var O=y===void 0?[]:Bt(y);d!==null;)(d.e.f&ie)===0&&O.push(d),d=d.next;var P=O.length;if(P>0){var re=(i&jn)!==0&&_===0?r:null;if(o){for($=0;$<P;$+=1)O[$].a?.measure();for($=0;$<P;$+=1)O[$].a?.fix()}Rs(n,O,re)}}o&&Hn(()=>{if(M!==void 0)for(S of M)S.a?.apply()}),e.first=n.first&&n.first.e,e.last=w&&w.e;for(var Oe of s.values())de(Oe.e);s.clear()}function _r(e,t,n,s){(s&gt)!==0&&et(e.v,t),(s&bt)!==0?et(e.i,n):e.i=n}function mr(e,t,n,s,r,l,i,u,a,o,p){var _=(a&gt)!==0,v=(a&Jr)===0,f=_?v?Qe(r,!1,!1):Je(r):r,d=(a&bt)===0?i:Je(i),y={i:d,v:f,k:l,a:null,e:null,prev:n,next:s};try{if(e===null){var w=document.createDocumentFragment();w.append(e=it())}return y.e=tt(()=>u(e,f,d,o),rs),y.e.prev=n&&n.e,y.e.next=s&&s.e,n===null?p||(t.first=y):(n.next=y,n.e.next=y.e),s!==null&&(s.prev=y,s.e.prev=y.e),y}finally{}}function kt(e,t,n){for(var s=e.next?e.next.e.nodes_start:n,r=t?t.e.nodes_start:n,l=e.e.nodes_start;l!==null&&l!==s;){var i=wt(l);r.before(l),l=i}}function oe(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}const xn=[...` 	
\r\f \v\uFEFF`];function Fs(e,t,n){var s=e==null?"":""+e;if(n){for(var r in n)if(n[r])s=s?s+" "+r:r;else if(s.length)for(var l=r.length,i=0;(i=s.indexOf(r,i))>=0;){var u=i+l;(i===0||xn.includes(s[i-1]))&&(u===s.length||xn.includes(s[u]))?s=(i===0?"":s.substring(0,i))+s.substring(u+1):i=u}}return s===""?null:s}function Hs(e,t){return e==null?null:String(e)}function xe(e,t,n,s,r,l){var i=e.__className;if(i!==n||i===void 0){var u=Fs(n,s,l);u==null?e.removeAttribute("class"):e.className=u,e.__className=n}else if(l&&r!==l)for(var a in l){var o=!!l[a];(r==null||o!==!!r[a])&&e.classList.toggle(a,o)}return l}function En(e,t,n,s){var r=e.__style;if(r!==t){var l=Hs(t);l==null?e.removeAttribute("style"):e.style.cssText=l,e.__style=t}return s}function ot(e,t,n=!1){if(e.multiple){if(t==null)return;if(!mt(t))return ns();for(var s of e.options)s.selected=t.includes(Sn(s));return}for(s of e.options){var r=Sn(s);if(ms(r,t)){s.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function $t(e){var t=new MutationObserver(()=>{ot(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Qt(()=>{t.disconnect()})}function Sn(e){return"__value"in e?e.__value:e.value}const Bs=Symbol("is custom element"),Us=Symbol("is html");function Ct(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function Ie(e,t,n,s){var r=Gs(e);r[t]!==(r[t]=n)&&(t==="loading"&&(e[Fr]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Vs(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Gs(e){return e.__attributes??={[Bs]:e.nodeName.includes("-"),[Us]:e.namespaceURI===ts}}var Tn=new Map;function Vs(e){var t=Tn.get(e.nodeName);if(t)return t;Tn.set(e.nodeName,t=[]);for(var n,s=e,r=Element.prototype;r!==s;){n=On(s);for(var l in n)n[l].set&&t.push(l);s=Ut(s)}return t}function Se(e=!1){const t=R,n=t.l.u;if(!n)return;let s=()=>pr(t.s);if(e){let r=0,l={};const i=zt(()=>{let u=!1;const a=t.s;for(const o in a)a[o]!==l[o]&&(l[o]=a[o],u=!0);return u&&r++,r});s=()=>b(i)}n.b.length&&ws(()=>{Mn(t,s),Lt(n.b)}),jt(()=>{const r=ee(()=>n.m.map(Ir));return()=>{for(const l of r)typeof l=="function"&&l()}}),n.a.length&&jt(()=>{Mn(t,s),Lt(n.a)})}function Mn(e,t){if(e.l.s)for(const n of e.l.s)b(n);t()}function hr(e,t,n){if(e==null)return t(void 0),qe;const s=ee(()=>e.subscribe(t,n));return s.unsubscribe?()=>s.unsubscribe():s}const Pe=[];function Ks(e,t=qe){let n=null;const s=new Set;function r(u){if(Rn(e,u)&&(e=u,n)){const a=!Pe.length;for(const o of s)o[1](),Pe.push(o,e);if(a){for(let o=0;o<Pe.length;o+=2)Pe[o][0](Pe[o+1]);Pe.length=0}}}function l(u){r(u(e))}function i(u,a=qe){const o=[u,a];return s.add(o),s.size===1&&(n=t(r,l)||qe),u(e),()=>{s.delete(o),s.size===0&&n&&(n(),n=null)}}return{set:r,update:l,subscribe:i}}function K(e){let t;return hr(e,n=>t=n)(),t}let Ft=Symbol();function Ge(e,t,n){const s=n[t]??={store:null,source:Qe(void 0),unsubscribe:qe};if(s.store!==e&&!(Ft in n))if(s.unsubscribe(),s.store=e??null,e==null)s.source.v=void 0,s.unsubscribe=qe;else{var r=!0;s.unsubscribe=hr(e,l=>{r?s.source.v=l:se(s.source,l)}),r=!1}return e&&Ft in n?K(e):b(s.source)}function Ve(){const e={};function t(){Qt(()=>{for(var n in e)e[n].unsubscribe();ut(e,Ft,{enumerable:!1,value:!0})})}return[e,t]}function Ws(e){R===null&&Br(),st&&R.l!==null?Ys(R).m.push(e):jt(()=>{const t=ee(e);if(typeof t=="function")return t})}function Ys(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const zs="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(zs);ls();const Xe={house:{key:"house",name:"Дом",resource:"pop",baseRate:0,fixedPopGain:3,baseCost:{wood:5,stone:5,food:5,gold:0,pop:0}},lumberMill:{key:"lumberMill",name:"Лесопилка",resource:"wood",baseRate:1,baseCost:{wood:0,stone:10,food:5,gold:0,pop:1}},quarry:{key:"quarry",name:"Каменоломня",resource:"stone",baseRate:1,baseCost:{wood:10,stone:0,food:5,gold:0,pop:1}},farm:{key:"farm",name:"Ферма",resource:"food",baseRate:1,baseCost:{wood:10,stone:10,food:0,gold:0,pop:1}},goldMine:{key:"goldMine",name:"Золотой рудник",resource:"gold",baseRate:.5,baseCost:{wood:30,stone:30,food:20,gold:0,pop:2}},townHall:{key:"townHall",name:"Ратуша",resource:null,baseRate:0,baseCost:{wood:150,stone:150,food:100,gold:75,pop:5},single:!0}},kn={house:"🏠",lumberMill:"🪓",quarry:"⛏️",farm:"🌾",goldMine:"🪙",townHall:"🏛️"},Xs={cheap:.8,medium:1,expensive:1.5},At={short:240,medium:360,long:480};function ae(e){return Math.abs(e)%1<.001?Math.round(e).toString():e.toFixed(1)}function Ht(e){const t=Math.max(0,Math.floor(e)),n=String(Math.floor(t/60)).padStart(2,"0"),s=String(t%60).padStart(2,"0");return`${n}:${s}`}function Nt(e){return e==="easy"?[{id:1,text:"Постройте 1 Лесопилку, 1 Каменоломню и 1 Ферму",kind:"buildSet",payload:{lumberMill:1,quarry:1,farm:1}},{id:2,text:"Накопите 150 дерева, 150 камня и 80 еды",kind:"resourceThreshold",payload:{wood:150,stone:150,food:80}},{id:3,text:"Постройте Ратушу",kind:"townHall"}]:e==="hard"?[{id:1,text:"Постройте 6 лесопилок, 6 каменоломен и 6 ферм",kind:"buildSet",payload:{lumberMill:6,quarry:6,farm:6}},{id:2,text:"Накопите 250 дерева, 250 камня и 120 еды",kind:"resourceThreshold",payload:{wood:250,stone:250,food:120}},{id:3,text:"Постройте Золотой рудник",kind:"goldMine"},{id:4,text:"Накопите 50 золота",kind:"resourceThreshold",payload:{gold:50}},{id:5,text:"Постройте Ратушу",kind:"townHall"}]:[{id:1,text:"Постройте 1 Лесопилку, 1 Каменоломню и 1 Ферму",kind:"buildSet",payload:{lumberMill:1,quarry:1,farm:1}},{id:2,text:"Накопите 200 дерева, 200 камня и 100 еды",kind:"resourceThreshold",payload:{wood:200,stone:200,food:100}},{id:3,text:"Постройте Ратушу",kind:"townHall"}]}function $n(e,t){switch(e.kind){case"buildSet":{const n=e.payload||{};return Object.entries(n).every(([s,r])=>t.counts[s]>=r)}case"resourceThreshold":{const n=e.payload||{};return Object.entries(n).every(([s,r])=>t.resources[s]>=r)}case"goldMine":return t.counts.goldMine>=1;case"townHall":return t.counts.townHall>=1}}function Ot(e,t){const n=Xe[t],s=e.counts[t],r=n.single?1:Math.pow(e.multiplier,s),l=n.baseCost,i=Xs[e.settings.cost]??1,u=a=>Math.ceil((a||0)*r*i);return{wood:u(l.wood),stone:u(l.stone),food:u(l.food),gold:u(l.gold),pop:u(l.pop)}}function Cn(e,t){return e.resources.wood>=t.wood&&e.resources.stone>=t.stone&&e.resources.food>=t.food&&e.resources.gold>=t.gold&&e.resources.pop>=(t.pop||0)}function Zs(e,t){e.resources.wood-=t.wood,e.resources.stone-=t.stone,e.resources.food-=t.food,e.resources.gold-=t.gold,e.resources.pop-=t.pop||0}function Js(e,t,n){t&&(e.rates[t]+=n)}function Qs(e,t){return Array.from({length:t},()=>Array.from({length:e},()=>null))}function el(e){for(let t=0;t<e.map.h;t++)for(let n=0;n<e.map.w;n++)if(!e.map.occupied[t][n])return{x:n,y:t};return null}function tl(e,t,n,s){e.map.occupied[s][n]=t,e.built.push({key:t,x:n,y:s})}function An(){return{started:!1,paused:!1,won:!1,timeLeft:240,timeSpeed:1,multiplier:1.25,resources:{wood:50,stone:50,food:30,gold:0,pop:3},rates:{wood:0,stone:0,food:0,gold:0,pop:0},counts:{house:0,lumberMill:0,quarry:0,farm:0,goldMine:0,townHall:0},settings:{cost:"medium",time:"medium",missions:"medium"},map:{w:12,h:12,occupied:Qs(12,12)},built:[],placement:{active:!1,buildKey:null},missions:[],log:[],loops:{tick:null,timer:null}}}function nl(){const e=Ks(An());function t(c){e.update(m=>(m.log.unshift(c),m))}function n(){e.update(c=>(c.timeLeft=At[c.settings.time]||240,c.missions=Nt(c.settings.missions),c))}function s(c,m){e.update(h=>(h.settings[c]=m,h))}function r(c){return c==="cheap"?"дешёвые":c==="expensive"?"дорогие":"средние"}function l(){const c=K(e),m=At[c.settings.time]||240,h=Nt(c.settings.missions).length,T=r(c.settings.cost);return`Время: ${Ht(m)}, цены: ${T}, заданий: ${h}.`}function i(){e.update(c=>{for(const m of c.missions){const h=$n(m,c);h!==!!m.done&&(m.done=h,h&&t("Задание выполнено: "+m.text))}return c})}function u(c){return c.missions.length>0&&c.missions.every(m=>$n(m,c))}function a(){e.update(c=>(!c.won&&u(c)&&(c.won=!0,p(),t("Вы выиграли! Ратуша возведена, все задания закрыты.")),c))}function o(){p(),e.update(c=>(c.loops.tick=setInterval(()=>{const m=K(e);if(m.paused||m.won||!m.started)return;const h=m.timeSpeed||1;e.update(T=>(T.resources.wood+=T.rates.wood*h,T.resources.stone+=T.rates.stone*h,T.resources.food+=T.rates.food*h,T.resources.gold+=T.rates.gold*h,T.resources.pop+=T.rates.pop*h,T)),i(),a()},1e3),c.loops.timer=setInterval(()=>{const m=K(e);m.paused||m.won||!m.started||(c.timeLeft-=m.timeSpeed||1,c.timeLeft<=0&&(c.timeLeft=0,p(),c.won||t("Поражение: время вышло.")))},1e3),c))}function p(){e.update(c=>(c.loops.tick&&clearInterval(c.loops.tick),c.loops.timer&&clearInterval(c.loops.timer),c.loops.tick=null,c.loops.timer=null,c))}function _(){e.update(c=>(c.paused=!0,c))}function v(){e.update(c=>(c.paused=!1,c))}function f(c){e.update(m=>(m.timeSpeed=c,m))}function d(){e.update(O=>(O.started||(O.timeLeft=At[O.settings.time]||240,O.missions=Nt(O.settings.missions),O.started=!0),O));const c=K(e),m=c.missions.length,h=Ht(c.timeLeft),T=r(c.settings.cost);t(`Игра началась! Настройки: время ${h}, цены ${T}, заданий ${m}.`),o()}function y(){p(),e.set(An()),n()}function w(c){e.update(m=>{const h=Xe[c];return h.single&&m.counts[c]>=1?(t(h.name+": уже построено."),m):el(m)?(m.placement.prevPaused=!!m.paused,m.placement.active=!0,m.placement.buildKey=c,m.paused=!0,t("Игра поставлена на паузу. Выберите клетку для строительства: "+h.name+". Нажмите Esc, чтобы отменить."),m):(t("На карте нет свободных клеток."),m)})}function M(){e.update(c=>{c.placement.active=!1,c.placement.buildKey=null;const m=c.placement.prevPaused;return typeof m<"u"?(c.paused=!!m,delete c.placement.prevPaused):c.paused=!1,c})}function E(c,m){const h=K(e);if(!h.started||!h.placement.active)return;if(h.map.occupied[m][c]){t("Эта клетка уже занята.");return}const T=h.placement.buildKey,O=Xe[T],P=Ot(h,T);if(!Cn(h,P)){t("Недостаточно ресурсов для: "+O.name);return}e.update(J=>(Zs(J,P),J.counts[T]+=1,Js(J,O.resource,O.baseRate),O.fixedPopGain&&(J.resources.pop=(J.resources.pop||0)+O.fixedPopGain),tl(J,T,c,m),J));const re=[];P.wood&&re.push("🌲 "+P.wood),P.stone&&re.push("🪨 "+P.stone),P.food&&re.push("🍖 "+P.food),P.gold&&re.push("🪙 "+P.gold),P.pop&&re.push("👥 "+P.pop),t("Построено: "+O.name+(re.length?" (стоимость: "+re.join(", ")+")":"")),O.fixedPopGain&&t("Население увеличено на +"+O.fixedPopGain);const Oe=K(e).placement.prevPaused;if(M(),typeof Oe<"u"&&!Oe){const J=K(e);!J.won&&!J.loops.tick&&o(),v()}i(),a()}function k(c){K(e).started&&w(c)}function q(c,m){const h=K(e);h.started&&h.placement.active&&E(c,m)}function L(c,m){const h=K(e);return!!(h.placement.active&&!h.map.occupied[m][c])}function S(c){return Ot(K(e),c)}function $(c,m){return Xe[m].single&&c.counts[m]>=1?!1:c.started&&Cn(c,Ot(c,m))}function N(c){return $(K(e),c)}function X(){K(e).placement.active&&(M(),t("Выбор клетки отменён."))}const Z={subscribe:e.subscribe,startGame:d,restart:y,pause:_,resume:v,setSpeed:f,setSetting:s,applySettings:n,previewStartInfo:l,build:k,enterPlacementMode:w,leavePlacementMode:M,onTileClick:q,tryPlaceAt:E,cancelPlacement:X,isTileSelectable:L,getCurrentCostFor:S,canBuildNowState:$,canBuildNow:N,log:t};return n(),Z}const j=nl();var rl=U('<header class="topbar svelte-1mjma7r"><div class="hud svelte-1mjma7r"><div class="hud-res svelte-1mjma7r"><span class="chip svelte-1mjma7r"><span class="lbl svelte-1mjma7r">Дерево</span> 🌲 <b> </b> <span class="rateTop svelte-1mjma7r"> </span></span> <span class="chip svelte-1mjma7r"><span class="lbl svelte-1mjma7r">Камень</span> 🪨 <b> </b> <span class="rateTop svelte-1mjma7r"> </span></span> <span class="chip svelte-1mjma7r"><span class="lbl svelte-1mjma7r">Еда</span> 🍖 <b> </b> <span class="rateTop svelte-1mjma7r"> </span></span> <span class="chip svelte-1mjma7r"><span class="lbl svelte-1mjma7r">Золото</span> 🪙 <b> </b> <span class="rateTop svelte-1mjma7r"> </span></span> <span class="chip svelte-1mjma7r"><span class="lbl svelte-1mjma7r">Жители</span> 👥 <b> </b> <span class="rateTop svelte-1mjma7r"> </span></span></div> <div style="display:flex; align-items:center; gap:8px;"><div class="timer small svelte-1mjma7r">⏱ <span> </span></div> <div class="seg svelte-1mjma7r" aria-label="Скорость времени"><button>x1</button> <button>x2</button> <button>x3</button></div> <button class="btn sm svelte-1mjma7r">Пауза</button> <button class="btn sm svelte-1mjma7r">Продолжить</button></div></div></header>');function sl(e,t){me(t,!1);const[n,s]=Ve(),r=()=>Ge(j,"$game",n);function l(St){j.setSpeed(St)}function i(){j.pause()}function u(){j.resume()}Se();var a=rl(),o=g(a),p=g(o),_=g(p),v=x(g(_),2),f=g(v),d=x(v,2),y=g(d),w=x(_,2),M=x(g(w),2),E=g(M),k=x(M,2),q=g(k),L=x(w,2),S=x(g(L),2),$=g(S),N=x(S,2),X=g(N),Z=x(L,2),c=x(g(Z),2),m=g(c),h=x(c,2),T=g(h),O=x(Z,2),P=x(g(O),2),re=g(P),Oe=x(P,2),J=g(Oe),gr=x(p,2),rn=g(gr),br=x(g(rn)),wr=g(br),sn=x(rn,2),yt=g(sn);let ln;var xt=x(yt,2);let an;var on=x(xt,2);let un;var Et=x(sn,2),fn=x(Et,2);le((St,yr,xr,Er,Sr,Tr,Mr,kr,$r,Cr,Ar,Nr,Or,Lr)=>{I(f,St),I(y,`+${yr??""}/с`),I(E,xr),I(q,`+${Er??""}/с`),I($,Sr),I(X,`+${Tr??""}/с`),I(m,Mr),I(T,`+${kr??""}/с`),I(re,$r),I(J,`+${Cr??""}/с`),I(wr,Ar),ln=xe(yt,1,"seg-btn svelte-1mjma7r",null,ln,Nr),an=xe(xt,1,"seg-btn svelte-1mjma7r",null,an,Or),un=xe(on,1,"seg-btn svelte-1mjma7r",null,un,Lr),Et.disabled=!r().started||r().paused,fn.disabled=!r().started||!r().paused},[()=>ae(r().resources.wood),()=>ae(r().rates.wood*(r().timeSpeed||1)),()=>ae(r().resources.stone),()=>ae(r().rates.stone*(r().timeSpeed||1)),()=>ae(r().resources.food),()=>ae(r().rates.food*(r().timeSpeed||1)),()=>ae(r().resources.gold),()=>ae(r().rates.gold*(r().timeSpeed||1)),()=>ae(r().resources.pop),()=>ae(r().rates.pop*(r().timeSpeed||1)),()=>Ht(r().timeLeft),()=>({active:r().timeSpeed===1}),()=>({active:r().timeSpeed===2}),()=>({active:r().timeSpeed===3})]),Y("click",yt,()=>l(1)),Y("click",xt,()=>l(2)),Y("click",on,()=>l(3)),Y("click",Et,i),Y("click",fn,u),H(e,a),he(),s()}var ll=U('<button><div><div class="title svelte-m9fs9v"> <span class="muted">(x<span> </span>)</span></div> <div> </div> <div class="cost svelte-m9fs9v"> </div></div></button>'),il=U('<div class="build-list svelte-m9fs9v"></div>');function al(e,t){me(t,!1);const[n,s]=Ve(),r=()=>Ge(j,"$game",n),l=["house","lumberMill","quarry","farm","goldMine","townHall"],i={house:"+3 👥",lumberMill:"+1 🌲/с",quarry:"+1 🪨/с",farm:"+1 🍖/с",goldMine:"+0.5 🪙/с",townHall:"Постройте, чтобы выиграть"};function u(p,_){const v=j.getCurrentCostFor(_),f=[];return v.wood&&f.push("🌲 "+v.wood),v.stone&&f.push("🪨 "+v.stone),v.food&&f.push("🍖 "+v.food),v.gold&&f.push("🪙 "+v.gold),v.pop&&f.push("👥 "+v.pop),f.length?"Стоимость: "+f.join(" | "):"Бесплатно"}function a(p){j.build(p)}Se();var o=il();ve(o,5,()=>l,Ae,(p,_)=>{var v=ll();let f;var d=g(v),y=g(d),w=g(y),M=x(w),E=x(g(M)),k=g(E),q=x(y,2);let L;var S=g(q),$=x(q,2),N=g($);le((X,Z,c,m)=>{f=xe(v,1,"build svelte-m9fs9v",null,f,X),Ie(v,"id","btn-"+b(_)),v.disabled=Z,I(w,`${Xe[b(_)].name??""} `),Ie(E,"id","cnt-"+b(_)),I(k,r().counts[b(_)]),L=xe(q,1,"subtitle svelte-m9fs9v",null,L,c),I(S,i[b(_)]),Ie($,"id","cost-"+b(_)),I(N,m)},[()=>({active:r().placement.buildKey===b(_)}),()=>!j.canBuildNowState(r(),b(_)),()=>({gold:b(_)==="townHall"}),()=>u(r(),b(_))]),Y("click",v,()=>a(b(_))),H(p,v)}),H(e,o),he(),s()}var ol=U('<div><div class="text svelte-1rsy201"> </div> <div class="status svelte-1rsy201"> </div></div>'),ul=U('<p class="svelte-1rsy201"> </p>'),fl=U('<div class="missions svelte-1rsy201"><!> <details class="details-log svelte-1rsy201"><summary class="svelte-1rsy201">Журнал</summary> <div class="log svelte-1rsy201"></div></details></div>');function cl(e,t){me(t,!1);const[n,s]=Ve(),r=()=>Ge(j,"$game",n);Se();var l=fl(),i=g(l);ve(i,1,()=>r().missions,o=>o.id,(o,p)=>{var _=ol();let v;var f=g(_),d=g(f),y=x(f,2),w=g(y);le(M=>{v=xe(_,1,"mission svelte-1rsy201",null,v,M),I(d,b(p).text),I(w,b(p).done?"Готово":"В процессе")},[()=>({done:b(p).done})]),H(o,_)});var u=x(i,2),a=x(g(u),2);ve(a,5,()=>r().log,Ae,(o,p)=>{var _=ul(),v=g(_);le(()=>I(v,b(p))),H(o,_)}),H(e,l),he(),s()}var vl=U("<div></div>"),dl=U('<div class="bld svelte-1qlqrlq"> </div>'),pl=U("<div><!> <!></div>");function _l(e,t){me(t,!1);const[n,s]=Ve(),r=()=>Ge(j,"$game",n),l=Qe(),i=Qe();function u(v,f){j.onTileClick(v,f)}It(()=>r(),()=>{se(l,Array.from({length:r().map.h},(v,f)=>f))}),It(()=>r(),()=>{se(i,Array.from({length:r().map.w},(v,f)=>f))}),tr(),Se();var a=pl();let o;var p=g(a);ve(p,1,()=>b(l),Ae,(v,f)=>{var d=Ps(),y=Zn(d);ve(y,1,()=>b(i),Ae,(w,M)=>{var E=vl();let k;le(q=>{k=xe(E,1,"tile svelte-1qlqrlq",null,k,q),En(E,`grid-column: ${b(M)+1}; grid-row: ${b(f)+1}`),Ie(E,"aria-label",`Клетка ${b(M)+1}:${b(f)+1}`)},[()=>({selectable:j.isTileSelectable(b(M),b(f)),occ:r().map.occupied[b(f)][b(M)]})]),Y("click",E,()=>u(b(M),b(f))),H(w,E)}),H(v,d)});var _=x(p,2);ve(_,1,()=>(r(),ee(()=>r().built)),v=>v.x+":"+v.y,(v,f)=>{var d=dl(),y=g(d);le(()=>{Ie(d,"data-type",(b(f),ee(()=>b(f).key))),En(d,`grid-column: ${b(f),ee(()=>b(f).x+1)??""}; grid-row: ${b(f),ee(()=>b(f).y+1)??""}`),Ie(d,"title",(b(f),ee(()=>b(f).key))),I(y,(pr(kn),b(f),ee(()=>kn[b(f).key])))}),H(v,d)}),le(v=>o=xe(a,1,"map svelte-1qlqrlq",null,o,v),[()=>({selecting:r().placement.active})]),H(e,a),he(),s()}var ml=U("<option> </option>"),hl=U("<option> </option>"),gl=U("<option> </option>"),bl=U('<div class="overlay svelte-14lw1x2"><div class="modal svelte-14lw1x2"><h3 class="svelte-14lw1x2">Настройки сложности</h3> <div class="form svelte-14lw1x2"><div class="row svelte-14lw1x2"><label for="sel-cost" class="svelte-14lw1x2">Стоимость зданий</label> <select id="sel-cost" class="svelte-14lw1x2"></select></div> <div class="row svelte-14lw1x2"><label for="sel-time" class="svelte-14lw1x2">Время для выполнения заданий</label> <select id="sel-time" class="svelte-14lw1x2"></select></div> <div class="row svelte-14lw1x2"><label for="sel-missions" class="svelte-14lw1x2">Сложность заданий</label> <select id="sel-missions" class="svelte-14lw1x2"></select></div> <p class="hint svelte-14lw1x2"> </p></div> <div style="display:flex; gap:10px; justify-content:center; margin-top:14px;"><button class="btn" id="btn-start">Начать игру</button></div></div></div>');function wl(e,t){me(t,!1);const[n,s]=Ve(),r=()=>Ge(j,"$game",n),l=[{value:"cheap",label:"дешевые (проще)"},{value:"medium",label:"средние"},{value:"expensive",label:"дорогие (сложнее)"}],i=[{value:"short",label:"мало времени (сложнее)"},{value:"medium",label:"средний запас времени"},{value:"long",label:"много времени (проще)"}],u=[{value:"easy",label:"легкие задания"},{value:"medium",label:"средние задания"},{value:"hard",label:"сложные задания"}];function a(){j.startGame()}function o(m){const h=m.target.value;j.setSetting("cost",h),j.applySettings()}function p(m){const h=m.target.value;j.setSetting("time",h),j.applySettings()}function _(m){const h=m.target.value;j.setSetting("missions",h),j.applySettings()}Se();var v=bl(),f=g(v),d=x(g(f),2),y=g(d),w=x(g(y),2);ve(w,5,()=>l,Ae,(m,h)=>{var T=ml(),O=g(T),P={};le(()=>{Ct(T,b(h).value===r().settings.cost),I(O,b(h).label),P!==(P=b(h).value)&&(T.value=(T.__value=b(h).value)??"")}),H(m,T)});var M;$t(w);var E=x(y,2),k=x(g(E),2);ve(k,5,()=>i,Ae,(m,h)=>{var T=hl(),O=g(T),P={};le(()=>{Ct(T,b(h).value===r().settings.time),I(O,b(h).label),P!==(P=b(h).value)&&(T.value=(T.__value=b(h).value)??"")}),H(m,T)});var q;$t(k);var L=x(E,2),S=x(g(L),2);ve(S,5,()=>u,Ae,(m,h)=>{var T=gl(),O=g(T),P={};le(()=>{Ct(T,b(h).value===r().settings.missions),I(O,b(h).label),P!==(P=b(h).value)&&(T.value=(T.__value=b(h).value)??"")}),H(m,T)});var $;$t(S);var N=x(L,2),X=g(N),Z=x(d,2),c=g(Z);le(m=>{M!==(M=r().settings.cost)&&(w.value=(w.__value=r().settings.cost)??"",ot(w,r().settings.cost)),q!==(q=r().settings.time)&&(k.value=(k.__value=r().settings.time)??"",ot(k,r().settings.time)),$!==($=r().settings.missions)&&(S.value=(S.__value=r().settings.missions)??"",ot(S,r().settings.missions)),I(X,m)},[()=>j.previewStartInfo()]),Y("change",w,o),Y("change",k,p),Y("change",S,_),Y("click",c,a),H(e,v),he(),s()}var yl=U('<div class="overlay svelte-1by0qmr"><div class="modal svelte-1by0qmr"><h3 class="gold svelte-1by0qmr">Победа!</h3> <p>Вы выполнили все задания и построили Ратушу до истечения времени.</p> <div style="display:flex; gap:10px; justify-content:center; margin-top:14px;"><button class="btn">Сыграть ещё раз</button></div></div></div>');function xl(e,t){me(t,!1);function n(){j.restart()}Se();var s=yl(),r=g(s),l=x(g(r),4),i=g(l);Y("click",i,n),H(e,s),he()}var El=U('<div class="overlay svelte-1by0qmr"><div class="modal svelte-1by0qmr"><h3 class="danger svelte-1by0qmr">Поражение</h3> <p>Время истекло. Попробуйте ещё раз — у вас получится!</p> <div style="display:flex; gap:10px; justify-content:center; margin-top:14px;"><button class="btn">Повторить</button></div></div></div>');function Sl(e,t){me(t,!1);function n(){j.restart()}Se();var s=El(),r=g(s),l=x(g(r),4),i=g(l);Y("click",i,n),H(e,s),he()}var Tl=U('<div class="container svelte-wx6unm"><!> <aside class="left-fixed svelte-wx6unm"><section class="panel svelte-wx6unm"><h2 class="svelte-wx6unm">Строительство</h2> <!></section></aside> <aside class="right-fixed svelte-wx6unm"><section class="panel svelte-wx6unm"><h2 class="svelte-wx6unm">Задания</h2> <!></section></aside> <section class="panel svelte-wx6unm"><h2 class="svelte-wx6unm">Карта поселения</h2> <!> <div class="legend svelte-wx6unm"><span class="svelte-wx6unm"><b class="svelte-wx6unm">🏛️</b> Ратуша</span> <span class="svelte-wx6unm"><b class="svelte-wx6unm">🪓</b> Лесопилка</span> <span class="svelte-wx6unm"><b class="svelte-wx6unm">⛏️</b> Каменоломня</span> <span class="svelte-wx6unm"><b class="svelte-wx6unm">🌾</b> Ферма</span> <span class="svelte-wx6unm"><b class="svelte-wx6unm">🏠</b> Дом</span> <span class="svelte-wx6unm"><b class="svelte-wx6unm">🪙</b> Золотой рудник</span></div></section></div> <!> <!> <!>',1);function Ml(e,t){me(t,!1);const[n,s]=Ve(),r=()=>Ge(j,"$game",n);let l=Qe(!1);function i(N){N.key==="Escape"&&j.cancelPlacement()}Ws(()=>(document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i))),It(()=>r(),()=>{se(l,r().started&&!r().won&&r().timeLeft<=0)}),tr(),Se();var u=Tl(),a=Zn(u),o=g(a);sl(o,{});var p=x(o,2),_=g(p),v=x(g(_),2);al(v,{});var f=x(p,2),d=g(f),y=x(g(d),2);cl(y,{});var w=x(f,2),M=x(g(w),2);_l(M,{});var E=x(a,2);{var k=N=>{wl(N,{})};Mt(E,N=>{r(),ee(()=>!r().started)&&N(k)})}var q=x(E,2);{var L=N=>{xl(N,{})};Mt(q,N=>{r(),ee(()=>r().won)&&N(L)})}var S=x(q,2);{var $=N=>{Sl(N,{})};Mt(S,N=>{b(l)&&N($)})}H(e,u),he(),s()}qs(Ml,{target:document.getElementById("app")});
